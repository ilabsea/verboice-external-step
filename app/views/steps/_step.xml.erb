<steps>
  <step name="<%=step.name%>"
            display-name="<%= step.display_name %>"
            icon="<%= step.icon %>"
            type="<%= step.kind %>"
            callback-url="http://{service_domain}<%=result_step_path(format: :json) %>">
    <% unless step.variables.incoming.empty? %>
      <settings>
        <% step.variables.incoming.each do |variable| %>
          <variable name="<%= variable.name %>"
                    display-name="<%= variable.display_name %>"
                    type="<%= variable.kind %>"/>
        <% end %>
      </settings>
    <% end %>

    <response type="variables">
      <% step.variables.outgoing.each do |variable| %>
        <variable name="<%= variable.name %>"
                  display-name="<%= variable.display_name %>"
                  type="<%= variable.kind %>" />
      <% end %>
    </response>
  </step>
</steps>
